# 函数极值与规划模型

> 国赛A题，美赛A题、B题、D题
>
> 优化策略、求最优解、贪心策略

## 1 线性规划模型

[线性规划模型](线性规划模型/线性规划模型.md)


## 2 非线性规划模型

[非线性规划模型](非线性规划模型/非线性规划模型.md)

## 3 整数规划模型

### 3.1 概述

什么是离散？什么是连续？ 

离散就是指问题的解或者自变量取值是整数式的，或者说取值是有穷的。 

连续就是指问题的取值是连续式的，可以是任意的浮点数形式。通常来讲连续问题会比离散问题更容易处理，因为离散问题会考虑到很多限制。 

如果给传统的非线性规划或者线性规划加上一个限制就是取值必须是整数，那么问题就是一个离散形式的优化模型。通常我们做离散优化的话**整数规划**比较多。 

但从计算机的数值计算方法考虑，**连续优化**问题的求解又基于**离散优化**的迭代。

整数规划的分类：

- 全部变量限制为整数的规划问题，称为纯整数规划；
- 部分变量限制为整数的规划问题，称为混合整数规划；
- 变量只取0或1的规划问题，称为0-1整数规划。

常见算法：

- **分枝定界法**：可求纯或混合整数线性规划。
- 割平面法：可求纯或混合整数线性规划。
- 隐枚举法：用于求解0- 1整数规划，有过滤法和分枝法。
- **匈牙利法**：解决指派问题(0-1规划特殊情形)。
- 蒙特卡罗法：求解各种类型规划。

### 3.2 0-1规划

#### 3.2.1 指派问题

<img src="%E5%87%BD%E6%95%B0%E6%9E%81%E5%80%BC%E4%B8%8E%E8%A7%84%E5%88%92%E6%A8%A1%E5%9E%8B.assets/image-20220712214730667.png" alt="image-20220712214730667" style="zoom:67%;" />

分支定界法：

<img src="%E5%87%BD%E6%95%B0%E6%9E%81%E5%80%BC%E4%B8%8E%E8%A7%84%E5%88%92%E6%A8%A1%E5%9E%8B.assets/image-20220712215353902.png" alt="image-20220712215353902" style="zoom:67%;" />

- 先按连续的线性规划问题来求解，再划分问题，直到得到整数最优解

匈牙利法：

<img src="%E5%87%BD%E6%95%B0%E6%9E%81%E5%80%BC%E4%B8%8E%E8%A7%84%E5%88%92%E6%A8%A1%E5%9E%8B.assets/image-20220712215544186.png" alt="image-20220712215544186" style="zoom:67%;" />

> 这个求解的过程目前我还不理解，但下面的案例中，代码的书写方式与结果的含义可以理解

#### 3.2.2 案例

<img src="%E5%87%BD%E6%95%B0%E6%9E%81%E5%80%BC%E4%B8%8E%E8%A7%84%E5%88%92%E6%A8%A1%E5%9E%8B.assets/image-20220712220025768.png" alt="image-20220712220025768" style="zoom:67%;" />

```python
from scipy.optimize import linear_sum_assignment
import numpy as np

T = np.array([
    [25, 29, 31, 42],
    [39, 38, 26, 20],
    [34, 27, 28, 40],
    [24, 42, 36, 23]])
row_ind, col_ind = linear_sum_assignment(T)
print(row_ind)
print(col_ind)
print(T[row_ind, col_ind])
print(T[row_ind, col_ind].sum())

```

- row_ind和col_ind：横坐标和纵坐标，每一个点分别代表某人做某项工作

## 4 动态规划

### 4.1 概述

动态规划的基本思想 ：

- 动态规划(Dynamic Programming)算法的核心思想是：**将大问题划分为小问题进行解决**，从而一步步获取最优解的处理算法 

- 动态规划算法与分治算法类似，其基本思想也是将待求解问题分解成若干个子问题，先求解子问题，然后从这些子问题的解得到原问题的解。 

- 与分治法不同的是，适合于用动态规划求解的问题，经分解得到子问题往往不是互相独立的。

  > 即下一个子阶段的求解是**建立在上一个子阶段的解的基础上**，进行进一步的求解

- 动态规划可以通过填表的方式来逐步推进，得到最优解

状态空间与剪枝：

<img src="%E5%87%BD%E6%95%B0%E6%9E%81%E5%80%BC%E4%B8%8E%E8%A7%84%E5%88%92%E6%A8%A1%E5%9E%8B.assets/image-20220713153952447.png" alt="image-20220713153952447" style="zoom:67%;" />

<img src="%E5%87%BD%E6%95%B0%E6%9E%81%E5%80%BC%E4%B8%8E%E8%A7%84%E5%88%92%E6%A8%A1%E5%9E%8B.assets/image-20220713154001351.png" alt="image-20220713154001351" style="zoom:67%;" />

## 5 贪心策略

### 5.1 概述

贪心算法总是作出在当前看来是最好的选择。也就是说贪心算法并不从整体最优上加以考虑，它所作出的选择只是在某种意义上的局部最优选择。当然，我们希望贪心算法得到的最终结果也是整体最优的。 

贪心算法通过一系列的选择来得到一个问题的解。它所作的每一个选择都是当前状态下某种意义的最好选择，即贪心选择。希望通过每次所作的贪心选择导致最终结果是问题的一个最优解。这种启发式的策略并不总能奏效，然而在许多情况下确能达到预期的目的。解活动安排问题的贪心算法就是一个例子。下面我们着重讨论可以用贪心算法求解的问题的一般特征。 

对于一个具体的问题，我们怎么知道是否可用贪心算法来解此问题，以及能否得到问题的一个最优解呢?这个问题很难给予肯定的回答。但是，从许多可以用贪心算法求解的问题中我们看到它们一般具有两个重要的性质：贪心选择性质和最优子结构性质。

贪心和dp的联系是非常紧密的，我们先来分析一下贪心和dp的不同之处：

- dp是根据迁移过程的状态去推导下一个过程的状态，是有理论依据的，是讲道理的，通过每次完美的检验而得到最优解，关键是找最优子结构和重复子问题，书上一句原话：dp的子结构必须的独立的，而且是重叠的而贪心每次都只顾眼前最优，目光短浅，这种方式是不讲道理的，不想dp一样，还根据前面的迁移状态推导后面的子问题，比如最经典的01背包问题根据贪心策略，每次放进去的都是目前最优的，即目前价值最大的，直到背包装不下，但是这样放的话肯定是不如人意的，因为没有考虑到背包容量的问题，为什么呢？因为前面说过了，贪心策略只考虑当前最优解，它才不会去考虑什么背包容量的问题呢，它只管装价值最大的物品，这样是得不到最优解的，必须再加一个约束条件：背包容量，那么这个做法就变成了dp的做法了

### 5.2 编程

<img src="%E5%87%BD%E6%95%B0%E6%9E%81%E5%80%BC%E4%B8%8E%E8%A7%84%E5%88%92%E6%A8%A1%E5%9E%8B.assets/image-20220713154930952.png" alt="image-20220713154930952" style="zoom:87%;" />

## 6 如何写出好的规划模型

数学建模题目的分类：

- 优化问题：重在模型建立，模型求解
- 数据问题：重在算法应用，结果叙述

如何建立好的模型：

- 知道到底在问什么
- 规划问题的难点往往在**目标函数**上
- 问题之间可以有联系，也可以并行解决

如何写好目标函数：

- 利用线性或非线性关系
- 利用求积与均值形式的函数
- 目标函数与约束条件可能并不独立 
- 可能需要用到积分或微分做目标函数
- 多个目标归一划，使用加权组合、求商等等方法

怎么找决策变量：

- 如果无法保证取值有穷，那么决策变量尽可能少
- 如果能抽象为0-1规划，那就用0-1规划

怎么找约束条件：

- 题目直接描述的
- 常识
- 根据题目背景进行文献检索

数学规划软件：杉树 lingo gurobi cplex 

